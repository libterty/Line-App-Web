(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd9fe"],{"81d3":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",{staticClass:"py-5"},[s("h1",[e._v("管理員頁面")]),e.isShow?s("div",[s("AdminShops",{attrs:{initShops:e.initShops},on:{"after-submit-create":e.afterSubmitCreate,"after-submit-edit":e.afterSubmitEdit,"after-submit-delete":e.afterSubmitDelete}})],1):e._e()])},n=[],o=(s("96cf"),s("1da1")),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"shops-form"},[e.isShowCreate?s("b-form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.submitNewShops(t)}}},[s("b-form-group",{attrs:{"label-cols-sm":"3",label:"店家名稱:","label-align-sm":"center","label-for":"newShops-shopName-input"}},[s("b-form-input",{attrs:{id:"newShops-shopName-input",state:e.newShops.shopName.length>0,type:"text",name:"newShops-shopName-input",required:""},model:{value:e.newShops.shopName,callback:function(t){e.$set(e.newShops,"shopName",t)},expression:"newShops.shopName"}})],1),s("b-form-group",{attrs:{"label-cols-sm":"3",label:"店家地址:","label-align-sm":"center","label-for":"newShops-shopAddress-input"}},[s("b-form-input",{attrs:{id:"newShops-shopAddress-input",state:e.newShops.shopAddress.length>0,type:"text",name:"newShops-shopAddress-input",required:""},model:{value:e.newShops.shopAddress,callback:function(t){e.$set(e.newShops,"shopAddress",t)},expression:"newShops.shopAddress"}})],1),s("b-form-group",{attrs:{"label-cols-sm":"3",label:"店家電話:","label-align-sm":"center","label-for":"newShops-shopTel-input"}},[s("b-form-input",{attrs:{id:"newShops-shopTel-input",state:e.newShops.shopTel.length>0,type:"text",name:"newShops-shopTel-input",required:""},model:{value:e.newShops.shopTel,callback:function(t){e.$set(e.newShops,"shopTel",t)},expression:"newShops.shopTel"}})],1),s("b-form-group",{attrs:{"label-cols-sm":"3",label:"店家負責人:","label-align-sm":"center","label-for":"newShops-representative-input"}},[s("b-form-input",{attrs:{id:"newShops-representative-input",state:e.newShops.representative.length>0,type:"text",name:"newShops-representative-input",required:""},model:{value:e.newShops.representative,callback:function(t){e.$set(e.newShops,"representative",t)},expression:"newShops.representative"}})],1),s("b-button-group",[s("b-button",{attrs:{type:"submit",variant:"success",size:"lg"}},[e._v("Submit")]),s("b-button",{staticStyle:{"margin-left":"0.25rem"},attrs:{type:"button",variant:"info",size:"lg"},on:{click:function(t){e.isShowCreate=!1}}},[e._v("Close")])],1)],1):e._e(),e.isShowEdit?s("b-form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.submitEditShops(t)}}},[s("b-form-group",{attrs:{"label-cols-sm":"3",label:"店家名稱:","label-align-sm":"center","label-for":"editShops-shopName-input"}},[s("b-form-input",{attrs:{id:"editShops-shopName-input",state:e.editShops.shopName.length>0,placeholder:e.editShops.shopName,type:"text",name:"editShops-shopName-input",required:""},model:{value:e.editShops.shopName,callback:function(t){e.$set(e.editShops,"shopName",t)},expression:"editShops.shopName"}})],1),s("b-form-group",{attrs:{"label-cols-sm":"3",label:"店家地址:","label-align-sm":"center","label-for":"editShops-shopAddress-input"}},[s("b-form-input",{attrs:{id:"editShops-shopAddress-input",state:e.editShops.shopAddress.length>0,placeholder:e.editShops.shopAddress,type:"text",name:"editShops-shopAddress-input",required:""},model:{value:e.editShops.shopAddress,callback:function(t){e.$set(e.editShops,"shopAddress",t)},expression:"editShops.shopAddress"}})],1),s("b-form-group",{attrs:{"label-cols-sm":"3",label:"店家電話:","label-align-sm":"center","label-for":"editShops-shopTel-input"}},[s("b-form-input",{attrs:{id:"editShops-shopTel-input",state:e.editShops.shopTel.length>0,placeholder:e.editShops.shopTel,type:"text",name:"editShops-shopTel-input",required:""},model:{value:e.editShops.shopTel,callback:function(t){e.$set(e.editShops,"shopTel",t)},expression:"editShops.shopTel"}})],1),s("b-form-group",{attrs:{"label-cols-sm":"3",label:"店家負責人:","label-align-sm":"center","label-for":"editShops-representative-input"}},[s("b-form-input",{attrs:{id:"editShops-representative-input",state:e.editShops.representative.length>0,placeholder:e.editShops.representative,type:"text",name:"editShops-representative-input",required:""},model:{value:e.editShops.representative,callback:function(t){e.$set(e.editShops,"representative",t)},expression:"editShops.representative"}})],1),s("b-button-group",[s("b-button",{attrs:{type:"submit",variant:"success",size:"lg"}},[e._v("Submit")]),s("b-button",{staticStyle:{"margin-left":"0.25rem"},attrs:{type:"button",variant:"info",size:"lg"},on:{click:function(t){e.isShowEdit=!1}}},[e._v("Close")])],1)],1):e._e()],1),s("b-table-simple",{attrs:{hover:"",small:"","caption-top":"",responsive:""}},[s("b-thead",{attrs:{"head-variant":"dark"}},[s("b-th",{attrs:{colspan:"1"}},[e._v("#")]),s("b-th",{attrs:{colspan:"1"}},[e._v("店家名稱")]),s("b-th",{attrs:{colspan:"1"}},[e._v("店家負責人")]),s("b-th",{attrs:{colspan:"1"}},[e._v("店家地址")]),s("b-th",{attrs:{colspan:"1"}},[e._v("店家電話")]),s("b-th",{attrs:{colspan:"2"}},[e._v("#")])],1),s("b-tbody",e._l(e.initShops,(function(t){return s("b-tr",{key:t._id},[s("b-td",{staticClass:"text-center"},[e._v(e._s(t._id))]),s("b-td",{staticClass:"text-center"},[e._v(e._s(t.shopName))]),s("b-td",{staticClass:"text-center"},[e._v(e._s(t.representative))]),s("b-td",{staticClass:"text-center"},[e._v(e._s(t.shopAddress))]),s("b-td",{staticClass:"text-center"},[e._v(e._s(t.shopTel))]),s("b-td",{staticClass:"text-center"},[s("b-button-group",[s("b-button",{attrs:{variant:"warning"},on:{click:function(s){return e.clickEdit(t._id,t.shopName,t.representative,t.shopAddress,t.shopTel)}}},[e._v("Edit")]),s("b-button",{attrs:{variant:"danger"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.onClickDelete(t._id)}}},[e._v("Delete")])],1)],1)],1)})),1)],1),s("br"),s("b-button",{on:{click:function(t){e.isShowCreate=!0}}},[e._v("Create New Coupon")])],1)},a=[],p=s("2fa3"),h={props:{initShops:{type:Array,required:!0}},data:function(){return{isShowCreate:!1,isShowEdit:!1,newShops:{shopName:"",shopAddress:"",shopTel:"",representative:""},editShopsId:"",editShops:{shopName:"",shopAddress:"",shopTel:"",representative:""}}},methods:{clickEdit:function(e,t,s,r,n){this.editShopsId=e,this.editShops.shopName=t,this.editShops.representative=s,this.editShops.shopAddress=r,this.editShops.shopTel=n,this.isShowEdit=!0},submitNewShops:function(){if(this.newShops.shopName.length<1)return p["a"].fire({icon:"error",title:"Wrong shopName Input Detected"});if(this.newShops.shopAddress.length<1)return p["a"].fire({icon:"error",title:"Wrong shopAddress Input Detected"});if(this.newShops.shopTel.length<1)return p["a"].fire({icon:"error",title:"Wrong shopTel Input Detected"});if(this.newShops.representative.length<1)return p["a"].fire({icon:"error",title:"Wrong representative Input Detected"});var e=JSON.stringify(this.newShops);this.$emit("after-submit-create",e),this.isShowCreate=!1},submitEditShops:function(){var e=JSON.stringify(this.editShops);this.$emit("after-submit-edit",this.editShopsId,e),this.isShowEdit=!1},onClickDelete:function(e){this.$emit("after-submit-delete",e)}},watch:{initShops:function(e){this.initShops=e}}},l=h,u=s("2877"),c=Object(u["a"])(l,i,a,!1,null,null,null),d=c.exports,b=s("365c"),S=new b["a"],m={name:"admin-shops",components:{AdminShops:d},data:function(){return{initShops:[],isShow:!1}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.getShopsInfo();case 3:s=t.sent,"success"===s.status&&(e.initShops=s.shops,e.isShow=!0),t.next=10;break;case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",p["a"].fire({icon:"error",title:t.t0.message}));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},methods:{afterSubmitCreate:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,S.postNewShop(e);case 3:if(r=s.sent,"success"!==r.status){s.next=11;break}return s.next=7,S.getShopsInfo();case 7:return n=s.sent,t.initShops=n.shops,t.isShow=!0,s.abrupt("return",p["a"].fire({icon:"success",title:"Create Shop Success"}));case 11:return s.abrupt("return",p["a"].fire({icon:"error",title:r.message}));case 14:return s.prev=14,s.t0=s["catch"](0),s.abrupt("return",p["a"].fire({icon:"error",title:s.t0.message}));case 17:case"end":return s.stop()}}),s,null,[[0,14]])})))()},afterSubmitEdit:function(e,t){var s=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,S.putShop(e,t);case 3:if(n=r.sent,"success"!==n.status){r.next=11;break}return r.next=7,S.getShopsInfo();case 7:return o=r.sent,s.initShops=o.shops,s.isShow=!0,r.abrupt("return",p["a"].fire({icon:"success",title:"Update Shop Success"}));case 11:return r.abrupt("return",p["a"].fire({icon:"error",title:n.message}));case 14:return r.prev=14,r.t0=r["catch"](0),r.abrupt("return",p["a"].fire({icon:"error",title:r.t0.message}));case 17:case"end":return r.stop()}}),r,null,[[0,14]])})))()},afterSubmitDelete:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,S.deleteShop(e);case 3:if(r=s.sent,"success"!==r.status){s.next=11;break}return s.next=7,S.getShopsInfo();case 7:return n=s.sent,t.initShops=n.shops,t.isShow=!0,s.abrupt("return",p["a"].fire({icon:"success",title:"Delete Shop Success"}));case 11:return s.abrupt("return",p["a"].fire({icon:"error",title:r.message}));case 14:return s.prev=14,s.t0=s["catch"](0),s.abrupt("return",p["a"].fire({icon:"error",title:s.t0.message}));case 17:case"end":return s.stop()}}),s,null,[[0,14]])})))()}}},f=m,v=Object(u["a"])(f,r,n,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d0dd9fe.f03ec6f1.js.map